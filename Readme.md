### Как это работает

Все сервисы запускаются в своих контейнерах изолированно от других

Сервисы:

#### 1. router

Он получает запросы от клиента и направляет его в другие сервисы.
Ничего не знает кроме интерфейсов к другим сервисам

#### 2. ref_service

Работает с postgres db. Хранит все рассылки которые нужно отправить.

##### 3. dispatch_service

Сервис занимается непосредственной отправкой сообщений. Реализовано на акторах

##### 4. sms_gateway

Эмулятор сервиса который посылает смс на различные каналы.
Для нас это будет черный ящик в продакшине

### Как запустить

На машине должен быть установлен docker демон и docker-compose

1. запускаем все сервисы:

docker-compose up -d

создаем рассылку: POST http://localhost:9010/api/dispatch/create

```json
{
"recipient": "71234",
"channel": "VIBER",
"content": "hello",
"expiryAt": "2018-08-25 22:00:00",
"retriesCount": 5
}
```

Получаем статус: POST http://localhost:9010/api/dispatch/getStatus

```json
{
  "id": "1047c19f-61ca-4aee-8142-eee7957af411"
}
```

#### Важно

1. Код не идеален.
2. println в коде это просто спешка, нужно использовать логгер log4j
3. нужно больше тестов, я бы сделал интеграционные еще
4. dispatch_service узнает о новых сообщениях только через стрим..
нужно прикрутить еще возможность для рестарта тасков
5. не все написал в этом пункте..

#### Мысли

Было бы здорово RPC заменить на Kafka, полностью перейти на событийную модель.


